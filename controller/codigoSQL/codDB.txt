CREATE DATABASE SMILIPS;

USE SMILIPS;

CREATE TABLE administrador(administradorID INT AUTO_INCREMENT PRIMARY KEY, email VARCHAR(100) NOT NULL, senha VARCHAR(35) NOT NULL);

CREATE TABLE usuario(usuarioID INT AUTO_INCREMENT PRIMARY KEY, nomeUsuario VARCHAR(100) NOT NULL, emailUsuario VARCHAR(100) UNIQUE NOT NULL, senhaUsuario VARCHAR(35) NOT NULL, rua VARCHAR(45) NOT NULL, bairro VARCHAR(45) NOT NULL, numero VARCHAR(5) NOT NULL, complemento VARCHAR(45), telefone VARCHAR(20) NOT NULL, ftPerfil LONGBLOB NOT NULL, situacao VARCHAR(10) NOT NULL);

CREATE TABLE msgImovelInvalido(msgImovelInvalidoID INT AUTO_INCREMENT PRIMARY KEY, mensagem VARCHAR(250) NOT NULL, usuarioID INT NOT NULL, CONSTRAINT fK_msgImovelInvalido_usuario FOREIGN KEY (usuarioID) REFERENCES usuario(usuarioID) ON UPDATE CASCADE ON DELETE CASCADE);

CREATE TABLE imovel(imovelID INT AUTO_INCREMENT PRIMARY KEY, rua VARCHAR(45) NOT NULL, numero VARCHAR(3) NOT NULL, cidade VARCHAR(45) NOT NULL, bairro VARCHAR(45), complemento VARCHAR(45), tipo VARCHAR(20) NOT NULL, valorAluguel DOUBLE NOT NULL, qtdQuarto INT NOT NULL, qtdBanheiro INT NOT NULL, qtdGaragem INT NOT NULL, area VARCHAR(10) NOT NULL, descricao VARCHAR(200) NOT NULL, situacao VARCHAR(15) NOT NULL, usuarioID INT NOT NULL, CONSTRAINT fK_imovel_usuario FOREIGN KEY (usuarioID) REFERENCES usuario(usuarioID) ON UPDATE CASCADE ON DELETE CASCADE);

CREATE TABLE imgImovel(imgImovelID INT AUTO_INCREMENT PRIMARY KEY, imagem LONGBLOB NOT NULL, imovelID INT NOT NULL, CONSTRAINT fK_imgImovel_imovel FOREIGN KEY (imovelID) REFERENCES imovel(imovelID) ON UPDATE CASCADE ON DELETE CASCADE);

CREATE TABLE tipoServico(tipoServicoID INT AUTO_INCREMENT PRIMARY KEY, tipoServico VARCHAR(45) UNIQUE NOT NULL NOT NULL);

CREATE TABLE plano(planoID INT AUTO_INCREMENT PRIMARY KEY, nome VARCHAR(20) NOT NULL, descricao VARCHAR(250) NOT NULL, valor DOUBLE NOT NULL);

CREATE TABLE servico(servicoID INT AUTO_INCREMENT PRIMARY KEY, descricao VARCHAR(250) NOT NULL, situacao VARCHAR(10) NOT NULL, tipoServicoID INT NOT NULL, usuarioID INT NOT NULL, CONSTRAINT fK_servico_tipoServico FOREIGN KEY (tipoServicoID) REFERENCES tipoServico(tipoServicoID) ON UPDATE CASCADE ON DELETE CASCADE, CONSTRAINT fK_servico_usuario FOREIGN KEY (usuarioID) REFERENCES usuario(usuarioID) ON UPDATE CASCADE ON DELETE CASCADE);

DROP TABLE administrador;

DROP TABLE usuario;

DROP TABLE msgImovelInvalido;

DROP TABLE imovel;

DROP TABLE imgImovel;

DROP TABLE tipoServico;

DROP TABLE plano;

DROP TABLE servico;
